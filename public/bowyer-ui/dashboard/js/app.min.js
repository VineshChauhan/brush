var bowyerApp;!function(){"use strict";bowyerApp=angular.module("bowyer",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","LocalStorageModule"])}(),function(){"use strict";function t(t,r,e){t.state("login",{url:"/login",templateUrl:"bowyer-ui/dashboard/partials/login/login.html",controller:"loginCtrl",controllerAs:"login"}).state("logout",{url:"/logout",controller:"logoutCtrl",controllerAs:"logout"}).state("forgotPassword",{url:"/forgotPassword",templateUrl:"bowyer-ui/dashboard/partials/forgotPassword/forgotPassword.html"}).state("register",{url:"/register",templateUrl:"bowyer-ui/dashboard/partials/register/register.html",controller:"registerCtrl",controllerAs:"register"}).state("dashboard",{url:"/",templateUrl:"bowyer-ui/dashboard/partials/dashboard/dashboard.html"}).state("dashboard.alerts",{url:"alerts",templateUrl:"bowyer-ui/dashboard/partials/dashboard/alerts/alerts.html"}).state("dashboard.users",{url:"users",controller:"usersCtrl as vm",templateUrl:"bowyer-ui/dashboard/partials/dashboard/users/users.html"}).state("dashboard.profile",{url:"profile",templateUrl:"bowyer-ui/dashboard/partials/dashboard/profile/profile.html",controller:"profileCtrl",controllerAs:"profile"}).state("dashboard.resetPassword",{url:"resetPassword",templateUrl:"bowyer-ui/dashboard/partials/dashboard/resetPassword/resetPassword.html",controller:"resetPasswordCtrl",controllerAs:"resetPassword"}).state("dashboard.api",{url:"api",templateUrl:"bowyer-ui/dashboard/partials/dashboard/api/api.html"}).state("dashboard.analytics",{url:"analytics",templateUrl:"bowyer-ui/dashboard/partials/dashboard/analytics/analytics.html"}).state("dashboard.config",{url:"config",templateUrl:"bowyer-ui/dashboard/partials/dashboard/config/config.html",controller:"configCtrl",controllerAs:"config"}).state("dashboard.config.roles",{url:"/roles",templateUrl:"bowyer-ui/dashboard/partials/dashboard/config/roles/roles.html",controller:"rolesCtrl",controllerAs:"roles"}).state("dashboard.config.navigation",{url:"/navigation",templateUrl:"bowyer-ui/dashboard/partials/dashboard/config/navigation/navigation.html"}).state("dashboard.healthcheck",{url:"healthcheck",templateUrl:"bowyer-ui/dashboard/partials/dashboard/healthcheck/healthcheck.html",controller:"healthCheckCtrl as vm"}),r.otherwise("/login"),e.setPrefix("bowyer")}bowyerApp.config(t)}(),function(){"use strict";function t(t,r){t.defaults.headers.common.apitoken=r.get("api_token")}bowyerApp.run(t)}(),function(){"use strict";angular.module("bowyer").controller("dashboardCtrl",["$scope",function(t){}])}(),function(){"use strict";bowyerApp.controller("loginCtrl",["api","$state","localStorageService","constants",function(t,r,e,o){var a=this;a.validateLogin=function(){a.loginError=!1;var s={url:"/api/login",data:{username:a.username,password:a.password},method:o.method.post};t.executeCall(s).then(function(o){o.data.api_token?(e.set("api_token",o.data.api_token),t.addTokenToCalls(),r.go("dashboard")):a.loginError=o.data.message},function(t){console.log(t)})}}])}(),function(){"use strict";bowyerApp.controller("logoutCtrl",["api","$state","localStorageService","constants",function(t,r,e,o){var a={url:"/api/logout"};t.executeCall(a).then(function(t){r.go("login")},t.logout(function(t){console.error(t)}))}])}(),function(){"use strict";bowyerApp.controller("registerCtrl",["api","$state","localStorageService","constants",function(t,r,e,o){var a=this;a.validateRegister=function(){if(a.registerError=!1,a.formData){var r={url:"/api/register",data:{username:a.formData.username,email:a.formData.email,password:a.formData.password},method:o.method.post};t.executeCall(r).then(function(t){t.data.user_id?(a.registerError={message:"User has been created.",type:"success"},a.formData={}):a.registerError=t.data},function(t){console.log(t)})}else a.registerError={message:"Username, email and password are mandatory.",type:"danger"}}}])}(),function(){"use strict";bowyerApp.factory("api",["$http","constants","$state","localStorageService",function(t,r,e,o){return{executeCall:function(e){return e.method===r.method.post?t.post(e.url,e.data):t.get(e.url)},logout:function(t){return function(r){401===r.status?(o.clearAll(),e.go("login")):t&&t(r)}},addTokenToCalls:function(){t.defaults.headers.common.apitoken=o.get("api_token")}}}])}(),function(){"use strict";bowyerApp.factory("commonFactory",[function(){return{}}])}(),function(){"use strict";bowyerApp.factory("constants",[function(){return{method:{post:"POST",get:"GET"}}}])}(),function(){"use strict";bowyerApp.controller("configCtrl",["$scope",function(t){}])}(),function(){"use strict";bowyerApp.controller("healthCheckCtrl",["api","localStorageService","healthCheckFactory",function(t,r,e){var o=this;o.api=e.initial,o.db=e.initial,o.ls=e.initial;var a={url:"/api/healthCheck/apiCheck"},s={url:"/api/healthCheck/dbCheck"};t.executeCall(a).then(function(t){o.api=e.success},t.logout(function(t){o.api=e.failed})),t.executeCall(s).then(function(t){o.db=e.success,t.data.api_token===r.get("api_token")?o.ls=e.success:o.ls=e.failed},t.logout(function(t){o.db=e.failed,o.ls=e.failed}))}])}(),function(){"use strict";bowyerApp.factory("healthCheckFactory",function(){return{initial:{checkValue:0,checkMessage:"checking ...",type:"warning"},success:{checkValue:100,checkMessage:"Healthy",checkPass:!0,type:"success"},failed:{checkValue:100,checkMessage:"Failed",type:"danger"}}})}(),function(){"use strict";bowyerApp.controller("profileCtrl",["api","constants",function(t,r){var e=this,o={url:"/api/user/profile"};e.roles=[{role_id:1,role_desc:"Admin"},{role_id:2,role_desc:"Regular User"}],t.executeCall(o).then(function(t){e.user=t.data},t.logout(function(t){console.log(t)})),e.validateAndSave=function(){o.method=r.method.post,o.data=e.user,t.executeCall(o).then(function(t){e.profileError=t.data},t.logout(function(t){console.log(t)}))}}])}(),function(){"use strict";bowyerApp.controller("resetPasswordCtrl",["api","constants",function(t,r){var e=this;e.validateAndSave=function(){if(e.error={},e.formData)if(e.formData.newPassword&&""!==e.formData.newPassword&&e.formData.newPassword===e.formData.confirmPassword){var o={url:"/api/user/resetPassword",method:r.method.post,data:e.formData};t.executeCall(o).then(function(t){e.resetPasswordError=t.data,"success"===e.resetPasswordError.type?e.formData={}:e.error.password=!0},t.logout(function(t){console.log(t)}))}else e.error={newPassword:!0,confirmPassword:!0};else e.error={password:!0,newPassword:!0,confirmPassword:!0}}}])}(),function(){"use strict";bowyerApp.controller("usersCtrl",["api",function(t){var r=this,e={url:"/api/admin/users"};t.executeCall(e).then(function(t){r.users=t.data},t.logout(function(t){console.log(t)}))}])}(),function(){"use strict";bowyerApp.directive("bowyerLogo",function(){return{restrict:"EA",template:'<span>bow</span><span style="color:#F39C12">yer</span>'}})}(),function(){"use strict";bowyerApp.controller("rolesCtrl",["api",function(t){var r=this,e={url:"/api/admin/roles"};t.executeCall(e).then(function(t){r.roles=t.data},t.logout(function(t){}))}])}();