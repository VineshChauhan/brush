var bowyerApp;!function(){"use strict";bowyerApp=angular.module("bowyer",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","LocalStorageModule"])}(),function(){"use strict";function t(t,e,a){t.state("login",{url:"/login",templateUrl:"bowyer-ui/dashboard/partials/login/login.html",controller:"loginCtrl",controllerAs:"login"}).state("logout",{url:"/logout",controller:"logoutCtrl",controllerAs:"logout"}).state("forgotPassword",{url:"/forgotPassword",templateUrl:"bowyer-ui/dashboard/partials/forgotPassword/forgotPassword.html"}).state("register",{url:"/register",templateUrl:"bowyer-ui/dashboard/partials/register/register.html",controller:"registerCtrl",controllerAs:"register"}).state("dashboard",{url:"/",templateUrl:"bowyer-ui/dashboard/partials/dashboard/dashboard.html"}).state("dashboard.alerts",{url:"alerts",templateUrl:"bowyer-ui/dashboard/partials/dashboard/alerts/alerts.html"}).state("dashboard.users",{url:"users",controller:"usersCtrl as vm",templateUrl:"bowyer-ui/dashboard/partials/dashboard/users/users.html"}).state("dashboard.settings",{url:"settings",templateUrl:"bowyer-ui/dashboard/partials/dashboard/settings/settings.html"}).state("dashboard.resetPassword",{url:"resetPassword",templateUrl:"bowyer-ui/dashboard/partials/dashboard/resetPassword/resetPassword.html"}).state("dashboard.api",{url:"api",templateUrl:"bowyer-ui/dashboard/partials/dashboard/api/api.html"}).state("dashboard.analytics",{url:"analytics",templateUrl:"bowyer-ui/dashboard/partials/dashboard/analytics/analytics.html"}).state("dashboard.config",{url:"config",templateUrl:"bowyer-ui/dashboard/partials/dashboard/config/config.html"}).state("dashboard.config.roles",{url:"/roles",templateUrl:"bowyer-ui/dashboard/partials/dashboard/config/roles/roles.html"}).state("dashboard.healthcheck",{url:"healthcheck",templateUrl:"bowyer-ui/dashboard/partials/dashboard/healthcheck/healthcheck.html",controller:"healthCheckCtrl as vm"}),e.otherwise("/login"),a.setPrefix("bowyer")}bowyerApp.config(t)}(),function(){"use strict";function t(t,e){t.defaults.headers.common.apitoken=e.get("api_token")}bowyerApp.run(t)}(),function(){"use strict";angular.module("bowyer").controller("dashboardCtrl",["$scope",function(t){}])}(),function(){"use strict";bowyerApp.controller("loginCtrl",["api","$state","localStorageService","constants",function(t,e,a,r){var o=this;o.validateLogin=function(){o.loginError=!1;var s={url:"/api/login",data:{username:o.username,password:o.password},method:r.method.post};t.executeCall(s).then(function(r){r.data.api_token?(a.set("api_token",r.data.api_token),t.addTokenToCalls(),e.go("dashboard")):o.loginError=r.data.message},function(t){console.log(t)})}}])}(),function(){"use strict";bowyerApp.controller("logoutCtrl",["api","$state","localStorageService","constants",function(t,e,a,r){var o={url:"/api/logout"};t.executeCall(o).then(function(t){e.go("login")},t.logout(function(t){console.error(t)}))}])}(),function(){"use strict";bowyerApp.controller("registerCtrl",["api","$state","localStorageService","constants",function(t,e,a,r){var o=this;o.validateRegister=function(){if(o.registerError=!1,o.formData){var e={url:"/api/register",data:{username:o.formData.username,email:o.formData.email,password:o.formData.password},method:r.method.post};t.executeCall(e).then(function(t){t.data.user_id?(o.registerError={message:"User has been created.",type:"success"},o.formData={}):o.registerError=t.data},function(t){console.log(t)})}else o.registerError={message:"Username, email and password are mandatory.",type:"danger"}}}])}(),function(){"use strict";bowyerApp.controller("usersCtrl",["api",function(t){var e=this,a={url:"/api/admin/users"};t.executeCall(a).then(function(t){e.users=t.data},t.logout(function(t){console.log(t)}))}])}(),function(){"use strict";bowyerApp.controller("healthCheckCtrl",["api","localStorageService","healthCheckFactory",function(t,e,a){var r=this;r.api=a.initial,r.db=a.initial,r.ls=a.initial;var o={url:"/api/healthCheck/apiCheck"},s={url:"/api/healthCheck/dbCheck"};t.executeCall(o).then(function(t){r.api=a.success},t.logout(function(t){r.api=a.failed})),t.executeCall(s).then(function(t){r.db=a.success,t.data.api_token===e.get("api_token")?r.ls=a.success:r.ls=a.failed},t.logout(function(t){r.db=a.failed,r.ls=a.failed}))}])}(),function(){"use strict";bowyerApp.factory("healthCheckFactory",function(){return{initial:{checkValue:0,checkMessage:"checking ...",type:"warning"},success:{checkValue:100,checkMessage:"Healthy",checkPass:!0,type:"success"},failed:{checkValue:100,checkMessage:"Failed",type:"danger"}}})}(),function(){"use strict";bowyerApp.factory("api",["$http","constants","$state","localStorageService",function(t,e,a,r){return{executeCall:function(a){return a.method===e.method.post?t.post(a.url,a.data):t.get(a.url)},logout:function(t){return function(e){401===e.status?(r.clearAll(),a.go("login")):t&&t(e)}},addTokenToCalls:function(){t.defaults.headers.common.apitoken=r.get("api_token")}}}])}(),function(){"use strict";bowyerApp.factory("commonFactory",[function(){return{}}])}(),function(){"use strict";bowyerApp.factory("constants",[function(){return{method:{post:"POST",get:"GET"}}}])}(),function(){"use strict";bowyerApp.directive("bowyerLogo",function(){return{restrict:"EA",template:'<span>bow</span><span style="color:#F39C12">yer</span>'}})}();